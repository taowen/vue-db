var Q=Object.defineProperty,z=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var v=(r,e,t)=>e in r?Q(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,b=(r,e)=>{for(var t in e||(e={}))G.call(e,t)&&v(r,t,e[t]);if(q)for(var t of q(e))H.call(e,t)&&v(r,t,e[t]);return r},C=(r,e)=>z(r,I(e));var u=(r,e,t)=>(v(r,typeof e!="symbol"?e+"":e,t),t);import{i as R,h as U,t as w,a as W,r as y,g as $,e as _,K as X,c as Y,n as Z,b as h,o as ee,d as x,f as j,j as N,k as te,l as re,m as se,w as ne,p as O,F as oe,q as ie,s as ue}from"./vendor.0058b349.js";const ae=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}};ae();const a={rpcProvider(){throw new Error("must install with rpcProvider before query or call")}},g=new Map;function ce(r,e){p.provide(r),Object.assign(a,e),r.mixin({created(){if(a.dehydrate||a.hydrate){const n=this.$.render;this.$.render=function(...o){let i=n.apply(this,o);if((!R(i)||typeof i.type!="string")&&(i=U("div",i)),a.hydrate)return i;i.props||(i.props={});const f={};for(const[m,l]of Object.entries(w(this.$.data)))W(l)&&l.value&&l.value.data&&(f[m]=l.value.data);return i.props["data-dehydrated"]=JSON.stringify(f),i}}const t=this.$.type;let s=t.instanceCount;s||(s=t.instanceCount=y(0)),s.value++},beforeMount(){var n;if(!a.hydrate)return;const t=(n=this.$el.dataset)==null?void 0:n.dehydrated;if(!t)return;const s=w(this.$.data);for(const[o,i]of Object.entries(JSON.parse(t)))s[o].value={loading:!1,data:i}},async serverPrefetch(){await p.inject().flushing}})}function S(r,e){_(()=>{const t=e();for(const[s,n]of Object.entries(t))if(typeof n=="object")for(const[o,i]of Object.entries(n))r[s][o]=i;else r[s]=n})}function le(r){return T(r.$).proxy}function T(r){return!r.parent||r.parent.type===X?r:T(r.parent)}function fe(r,e){if(r instanceof c){const t=L(r,e);return Y(()=>{const s=t.value;return{loading:s.loading,data:s.data[0],error:s.error}})}return P(r,e)[0]}function P(r,e){if(r instanceof c)return L(r,e);const t=r;t.instanceCount||(t.instanceCount=y(0)),t.instanceCount.value;const s=[];let n;if(e.$parent)n=e.$parent.$.subTree;else if(e.$root)n=e.$root.$.subTree,delete e.$root;else throw new Error("must provide $parent or $root");return k(s,n,t,e),s}function k(r,e,t,s){if(!!e){if(e.component)e.type===t&&de(e.component.proxy,s)&&r.push(e.component.proxy),k(r,e.component.subTree,t,s);else if(Array.isArray(e.children))for(const n of e.children)R(n)&&k(r,n,t,s)}}function de(r,e){if(!e)return!0;for(const[t,s]of Object.entries(e))if(t==="$parent"){if(r.$.parent.proxy!==s)return!1}else if(r[t]!==s)return!1;return!0}function pe(r,e,...t){const s=r.$;E(!0,e,t,s)}function A(r,e,t){if(t.component)E(!1,r,e,t.component);else if(Array.isArray(t.children))for(const s of t.children)R(s)&&A(r,e,s)}function E(r,e,t,s){const n=s.proxy;!r&&n[e]?n[e].apply(n,t):A(e,t,s.subTree)}function F(){return new Promise(r=>{Z(r)})}async function V(r){return new Promise(e=>setTimeout(e,r))}function he(r,e){if(e instanceof c)return r;if(r.$.type!==e)throw new Error("type mismatch");return r}function J(r){let e=this&&this.Resource!==c?this:void 0;return{as(t){const s=n=>{const o=[];for(const m of r.affectedTables){const l=g.get(m);for(const K of l||[])o.push(K.newRequest())}const i=r.command||t,f=new D(i,n);return a.rpcProvider(o,f),f.promise};return C(b({},e),{[t]:s,defineCommand:J})}}}function ye(r,e){return h(new c(r,e))}const d=class{constructor(){u(this,"buffered",[]);u(this,"flushing")}static provide(e){e.provide(d.key,new d)}static inject(){return $().appContext.provides[d.key]}execute(e){this.buffered.push(e),this.buffered.length===1&&(this.flushing=this.flush())}async flush(){await F();const e=this.buffered.map(t=>t.newRequest());this.buffered=[],await a.rpcProvider(e),this.flushing=void 0}};let p=d;u(p,"key",Symbol());class me{constructor(e,t){u(this,"result",y({loading:!1,data:[],error:void 0}));u(this,"criteria",{});u(this,"version",0);this.resource=e;const s=p.inject(),n=$();_(()=>{t&&(this.criteria=t()),a.hydrate&&!n.isMounted||s.execute(this)})}newRequest(){return this.version++,new M(this)}}class c{constructor(e,t){u(this,"pickedFields");u(this,"subResources",{});this.table=e,this.options=t}clone(){const e=new c(this.table,this.options);return e.pickedFields=this.pickedFields,e.subResources=b({},this.subResources),e}pick(...e){const t=this.clone();return t.pickedFields=e,h(t)}load(e,t,s,n){const o=this.clone();return o.subResources[e]={single:!0,resource:t,dynamicCriteria:s,staticCriteria:n==null?void 0:n.staticCriteria},h(o)}query(e,t,s,n){const o=this.clone();return o.subResources[e]={resource:t,dynamicCriteria:s,staticCriteria:n==null?void 0:n.staticCriteria},h(o)}toJSON(){var e;return{table:this.table,staticCriteria:(e=this.options)==null?void 0:e.staticCriteria,subResources:Object.keys(this.subResources).length===0?void 0:this.subResources}}}function L(r,e){const t=new me(w(r),e);return $().scope.run(()=>{let s=g.get(r.table);s||g.set(r.table,s=new Set),s.add(t),ee(()=>{s.delete(t)})}),t.result}class M{constructor(e){u(this,"baseVersion");u(this,"criteria");this.query=e,this.baseVersion=e.version,this.criteria=e.criteria}get resource(){return this.query.resource}get isExpired(){return this.baseVersion!==this.query.version}resolve(e){this.isExpired||(this.query.version++,this.query.result.value={loading:!1,data:e,error:void 0})}reject(e){this.isExpired||(this.query.version++,this.query.result.value={loading:!1,data:[],error:e})}toJSON(){return{resource:this.resource,criteria:this.criteria}}}class D{constructor(e,t){u(this,"promise");u(this,"resolve");u(this,"reject");u(this,"responded",!1);this.command=e,this.args=t,this.promise=new Promise((s,n)=>{this.resolve=o=>{this.responded||(this.responded=!0,s(o))},this.reject=o=>{this.responded||(this.responded=!0,n(o))}})}toJSON(){return{command:this.command,args:this.args}}}var ve=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",install:ce,animate:S,pageOf:le,load:fe,query:P,walk:pe,waitNextTick:F,sleep:V,castTo:he,defineCommand:J,defineResource:ye,Resource:c,QueryRequest:M,CommandRequest:D}),be=(r,e)=>{const t=r.__vccOpts||r;for(const[s,n]of e)t[s]=n;return t};const we=x({props:["color"],data(){return{left:0}},mounted(){S(this.$refs.myDiv,()=>({style:{left:`${this.left}px`}})),(async()=>{for(;;)await V(500),this.left+=20})()}});function ge(r,e,t,s,n,o){return j(),N("div",{style:re({position:"absolute",backgroundColor:r.color}),ref:"myDiv"},[te(r.$slots,"default")],4)}var ke=be(we,[["render",ge]]);const Re=ie("O_O"),$e=x({setup(r){const e=y("red");return(t,s)=>(j(),N(oe,null,[se(ke,{color:e.value},{default:ne(()=>[Re]),_:1},8,["color"]),O("button",{onClick:s[0]||(s[0]=n=>e.value="red")},"red"),O("button",{onClick:s[1]||(s[1]=n=>e.value="green")},"green")],64))}}),B=ue($e);B.use(ve);B.mount("#app");
